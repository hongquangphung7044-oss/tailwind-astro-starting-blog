---
import { Image } from "astro:assets";
import FormattedDate from "./FormattedDate.astro";
import Tag from "./Tag.astro";
import Link from "./Link.astro";

const { post } = Astro.props;
const { title, date, tags, summary, cover, sticky } = post.data;
const postLink = post.slug ? `/blog/${post.slug}` : `/blog/${post.id}`;
---

<li class="py-12">
  <article>
    <div class="space-y-2 xl:grid xl:grid-cols-4 xl:items-baseline xl:space-y-0">
      <dl>
        <dt class="sr-only">Published on</dt>
        <dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400">
          <FormattedDate date={date} />
        </dd>
      </dl>
      <div class="space-y-5 xl:col-span-3">
        <div class="space-y-6">
          <div>
            <h2 class="text-2xl font-bold leading-8 tracking-tight">
              <Link href={postLink} class="text-gray-900 dark:text-gray-100">
                {sticky && <span class="text-yellow-500 mr-2" title="ç½®é¡¶">ğŸ“Œ</span>}
                {title}
              </Link>
            </h2>
            <div class="flex flex-wrap mt-2 mb-2">
              {tags && tags.map((tag) => <Tag text={tag.id || tag} id={tag.id || tag} />)}
            </div>
          </div>
          
          {/* ğŸ”¥ è¿™é‡Œçš„å›¾ç‰‡é€»è¾‘æ˜¯åŸä½œè€…æœ€æ­£å®—çš„æ’ç‰ˆä½ç½® */}
          <div class="flex flex-col lg:flex-row gap-6">
            {cover && (
                <div class="flex-shrink-0">
                    <Link href={postLink} aria-label={`Read "${title}"`}>
                        <Image 
                            src={cover} 
                            alt={title} 
                            width={240} 
                            height={160} 
                            class="h-40 w-full rounded-lg object-cover shadow-md hover:opacity-90 transition-opacity lg:w-60" 
                        />
                    </Link>
                </div>
            )}
            <div class="prose max-w-none text-gray-500 dark:text-gray-400 flex-1">
                {summary}
            </div>
          </div>

        </div>
        <div class="text-base font-medium leading-6">
          <Link
            href={postLink}
            class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
            aria-label={`Read more: "${title}"`}
          >
            Read more &rarr;
          </Link>
        </div>
      </div>
    </div>
  </article>
</li>
